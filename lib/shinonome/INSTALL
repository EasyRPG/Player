東雲12ドット漢字フォント
				1999, 2000
				古川 泰之 <Furukawa.Yasuyuki@fujixerox.co.jp>

  このドキュメントは、フォントデータの生成(ここではあえてコンパイルと
呼びます)、インストール手順およびパターンのカスタマイズ方法について説
明します。


● ディレクトリ構成

全部で7つある各サブディレクトリには、

  latin1	ISO8859-1 ASCIIフォント
  hankaku	JISX0201.1976 ASCIIフォント＋半角カタカナ
  kanjic	JISX0208.1983 固定長漢字フォント
  kanjip	JISX0208.1983 可変長漢字フォント
  mincho	JISX0208.1983 固定長漢字フォント明朝体 (kanjicとの差分)
  marumoji	JISX0208.1983 固定長漢字フォント丸文字   ( 〃 )
  tools		コンパイルに必要なフィルタ郡

が含まれています。


● コンパイルに必要なもの

toolsディレクトリ以下にあるフィルタを動かすには、最低限、

	- Perl           5.00503 以上
	- GNU awk (gawk) 3.0.4 以上

が必要です(もう少し古いバージョンでも動くと思いますが、確認しておりま
せん‥‥)。共に、日本語拡張されている必要は特にありません。自分のシ
ステムにインストールされているか、確認してください。


● コンパイル・インストール手順

  製作作業の都合上、独自形式のフォントのソースしか用意しておりませんの
で、コンパイルして、BDFおよびPCFファイルを作成してください。GNU awk
およびPerlが必要です。一般的なLinuxシステムの場合、以下のようにコマン
ドを実行します。

	$ ./configure --with-fontdir=/usr/X11R6/lib/X11/font/shinonome
	$ make
	$ make install

さらに、エイリアスを定義するfonts.aliasファイルもインストールする場合、

	$ make install-alias

を実行しますが、必ずしも必要なものではありません。jisx0208.1990 から、
jisx0208.1983へエイリアスをはったり、明朝、丸文字をフォントセットで指
定しやすいように、それら用にiso8859-1 フォントのエイリアスを作ったりし
ます。むしろ、既存のfonts.aliasを変に上書きする可能性があるので、注意
して実行した方がいいでしょう。

デフォルトでは、普段使われるローマン体の他に、ボールド体(太字)、イタリッ
ク体(斜体)がインストールされます。さらにボールドイタリック体のフォント
が欲しい場合、confgureスクリプトに対して、"--enable-bolditalic"オプショ
ンを追加してください。ただし、イタリック生成には私のpoorなスクリプトが
タコなため、大変時間がかかります。そのため、逆に、これを省略したい場合、
"--disable-italic"を追加します。

てっとり早く、プレビューを閲覧するには、

	$ ./configure
	$ make test

によって、XFDアプリケーションが起動しますので、デザインを一通り確認で
きます(この場合、ローマン体しか生成しませんので比較的、すぐに見ること
ができます)。
 
また、東雲フォントで独自に追加した明朝体、丸文字へ興味がない場合、

	$ ./configure --disable-mincho  --disable-marumoji

というように、configureへ、オプションを追加してください。これらのフォ
ントデータを無効にすることができます。

  尚、申し訳ございませんが、FreeBSDではmakeではなく、gmakeを用いてくだ
さい。


〜お願い〜

  configureは必ず、makeする前に行ってください。make後に行っても、
configureへのオプションが反映されません。

  デフォルトではフォント名が一般的な、

	-Misc-Fixed-Medium-R-Normal--12-110-75-75-C-120-JISX0208.1990-0
        ~~~~~~~~~~~~
	-Misc-Mincho-Medium-R-Normal--12-110-75-75-C-120-JISX0208.1990-0
        ~~~~~~~~~~~~~
	-Misc-Marumoji-Medium-R-Normal--12-110-75-75-C-120-JISX0208.1990-0
        ~~~~~~~~~~~~~~~
であることに十分に配慮してください。そのため、同一フォント名があると、
衝突してしまい、オリジナルかもしくは東雲フォントのどちらかが無効になっ
てしまいます。
このような場合、configureへの "--with-foundry"オプションによって問題を
避けることができます。他にも以下のように各ファイル名を変更することもで
きます。


	$ ./conifgure  --with-foundry=フォント・ファンダリ名 \
		  --with-family=フォント・ファミリ名 \
		  --with-kanjic_outfile=固定長漢字フォント・ファイル名 \
		  --with-kanjip_outfile=プロポーショナル漢字フォント・ファイル名 \
		  --with-latin1_outfile=Latin1フォント・ファイル名
		  --with-hankaku_outfile=半カナフォント・ファイル名

ただしファイル名には、拡張子 .pcf.gzを除いてください。例えば、東雲フォ
ントを、"Shnonome-Gothic" の12ドットフォントとして利用する場合、

	$ ./conifgure  --with-foundry=Shinonome \
		       --with-family=Gothic

というようにしてください。

※ 丸文字、明朝体に関しては、ファミリ名はそれぞれ、"Marumoji",
   "Mincho" 固定です。ファンダリ名および出力ファイル名のみ、変更可能で
   す。


●文字パターンのカスタマイズについて

  おそらく、私のデザインセンスが明らかに不足しているために、自分でパター
ンを変更したい場合も多分にあるかと思います。この手順を説明します。

1. 一旦、

	$ make src

  を行ってください。各サブディレクトリに、font_src.bitが用意されます(明
  朝および丸文字データに関しては、差分しか含まれてないので、上記命令によっ
  てで復元します)。

2. これをテキストエディタから直接変更してください。特定の漢字データの
   探し方は、付属スクリプトで、例えば

	$ $(top_srcdir)/tools/kcode 漢字(全角2文字まで)

   とすれば、漢字コードが10進で表示されるので、これをエディタ上で検索
   します。フォントソースにも各文字データに対応する漢字がEUCで埋め込ま
   れているので、emacsなどの漢字対応のエディタから直接検索することも可
   能です。編集する際、横幅数や、"."の","への打ち間違いなどは許容する
   ようになっていますのである程度ラフに行うことができます。デザインパ
   ターンのプレビューは、作業しているサブディレクトリ上で、

	$ make test

   とすることで見ることができるでしょう。

3. 最終的に確定したら、フォントソースのトップディレクトリで、

	$ make renew
	$ make distclean

  とすれば、上記のラフな打ち間違いの整理や、差分ファイルの生成・中間ファ
  イルの完全な削除などを行い、このオリジナルアーカイブの配布形態と同一
  の状態にすることができます。

こんなダサい方法ではなく、xmbdfed等のGUIアプリケーションを利用してスマー
トに修正する場合は、

1. 一旦、
	$ make bdf

  とすれば、一般的なXのフォントソース形式である、BDFファイルが各サブディ
  レクトリに作成されます。

2. この BDFファイルを xmbdfed なり GUIのエディタで編集してください。

3. 最終的に、上記の 3 と同じように

	$ make renew
	$ make distclean

   を行います。	

尚、このフォントを個人的に修正を加えたものを配布してそれにソースもつけ
たい場合、配布形式はBDFだけでも、この形式に従ってもどちらでも構いませ
ん。どちらでもご自由に行って下さい。
